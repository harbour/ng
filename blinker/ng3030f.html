<HTML>
<HEAD><TITLE>Blinker 4.0 Online Reference - Long Entry</TITLE></HEAD>
<BODY>

<A HREF="ng2fcb1.html">[&lt;&lt;Previous Entry]</A>
<A HREF="ng2852a.html">[^^Up^^]</A>
<A HREF="ng309f1.html">[Next Entry&gt;&gt;]</A>
<A HREF="menu.html" >[Menu]</A>
<A HREF="info.html">[About The Guide]</A>
<HR>
<PRE>
 <B>DosMapRealSeg()               Convert real mode paragraph value into protected mode selector.</B>
------------------------------------------------------------------------------

 <U>Function : <B>Convert a real mode paragraph value into a protected mode</B></U>
            <B>selector.</B>

 <U>Syntax   : <B>USHORT BLXAPI DosMapRealSeg( USHORT paragraph,</B></U>
            <B>ULONG size, PSEL selector);</B>

 <U>paragraph  <B>A real mode segment address, e.g. to map address B800:0000 for</B></U>
            <B>the colour screen use 0xB800.</B>

 <U>size       <B>The size of the memory region to be mapped in bytes, which may be</B></U>
            <B>larger than 64 Kb.</B>

 <U>selector   <B>Pointer to an integer to receive the selector.</B></U>

 <U>Return   : <B>A selector which has the same base address as the real mode</B></U>
            <B>segment.</B>

 DosMapRealSeg() is used to map real mode segments onto protected mode
 selectors in order to make real mode addresses accessible from protected
 mode. (For example the real mode video buffer at segment 0xB800).

 If you need to access the low-memory BIOS data area at real mode segment
 0x0040 in protected mode, use DosGetBIOSSeg() to obtain a selector in
 preference to this function.

 DosMapRealSeg() does NOT allocate memory, if you need to allocate real mode
 memory use DosAllocRealSeg().

 Example:

    <B>#include &lt;stdlib.h&gt;</B>
    <B>#include &lt;stdio.h&gt;</B>
    <B>#include &lt;string.h&gt;</B>
    <B>#include &lt;blx286.h&gt;</B>
    <B>#define VID_BUF 0xB800</B>
    <B>#define VID_SIZE 0x8000l</B>
    <B>void main (void)</B>
    <B>{</B>
    <B>SEL         video_buffer;</B>
    <B>/* Get a selector that corresponds to the screen buffer */</B>
    <B>if (DosMapRealSeg(VID_BUF,VID_SIZE,&amp;video_buffer) != 0)</B>
    <B>   {</B>
    <B>   printf("Unable to map screen segment\n");</B>
    <B>   exit(255);</B>
    <B>   }</B>
    <B>printf("Selector for video buffer %04X\n",video_buffer);</B>
    <B>}</B>
</PRE>
<HR>
This page created by ng2html v1.05, the Norton guide to HTML conversion utility.
Written by <A HREF="http://www.acemake.com/hagbard">Dave Pearson</A>
<HR>
</BODY>
</HTML>
